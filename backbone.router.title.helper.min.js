(function(t,e){var r=t.Router.prototype.route;e.extend(t.Router.prototype,{_setPromisedTitle:function(t,e){var r=this;if(!jQuery)throw Error("Backbonejs-Router-Title-Helper: Currently only jQuery.Deferred object is supported");if(!jQuery.Deferred)throw Error("Backbonejs-Router-Title-Helper: jQuery >= 1.5 is required to use Deferred object");$.when(t).then(function(t){document.title=t,r.trigger("change:title",e,t),delete r.titles[e],r.titles[e]=new jQuery.Deferred},function(){throw"Your deferred job failed. No title to set."})},_setTitle:function(t){var e=this.titles[t];if(!e&&!this.titles.default)throw Error("Backbonejs-Router-Title-Helper: No title found and no default title provided.");return"object"==typeof e&&e.promise?this._setPromisedTitle(e,t):(document.title="function"==typeof e?e.apply(this,arguments):this[e]?this[e].apply(this,arguments):"string"==typeof e?e:this.titles.default,this.trigger("change:title",t,document.title),void 0)},route:function(t,e,i){var o=function(){i||(i=this[e]),i.apply(this,arguments),this.titles&&this._setTitle(e)};return r.call(this,t,e,o)}})})(Backbone,_);