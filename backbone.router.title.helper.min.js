(function(t,e){var i=t.Router.prototype.route;e.extend(t.Router.prototype,{_setPromisedTitle:function(t,e){var i=this;if(jQuery){if(!jQuery.Deferred)throw Error("Currently, Backbonejs-Router-Title-Helper works with jQuery.Deferred, so jQuery > 1.5 is required");$.when(t).then(function(t){document.title=t,i.trigger("change:title",e,t),delete i.titles[e],i.titles[e]=new jQuery.Deferred},function(){throw"Your deferred job failed. No title to set."})}},_setTitle:function(t){var e=this.titles[t];if(!e&&!this.titles.default)throw Error("Backbonejs-Router-Title-Helper: No title found and no default title provided.");return"object"==typeof e&&e.promise?this._setPromisedTitle(e,t):(document.title="function"==typeof e?e.apply(this,arguments):this[e]?this[e].apply(this,arguments):"string"==typeof e?e:this.titles.default,this.trigger("change:title",t,document.title),void 0)},route:function(t,e,r){var o=function(){r||(r=this[e]),r.apply(this,arguments),this.titles&&this._setTitle(e)};return i.call(this,t,e,o)}})})(Backbone,_);